# S21_Linux. First Project

## Part 1
![img1.png](img%2Fimg1.png)

Смотрим версию Ubuntu после установки

(Команда: "cat /etc/issue")

## Part 2
![img2.png](img%2Fimg2.png)
![img2.1.png](img%2Fimg2.1.png)

Добавляем пользователя testuser
- "sudo useradd testuser -d /home/user -m -G adm -s /bin/bash"

Добавляем в группу
- "sudo usermod -aG adm testuser"


Проверяем добавление:
- "cat /etc/passwd"
- "groups testuser"

## Part 3
### Part 3.1 Part 3.2
![img3.png](img%2Fimg3.png)

Зададим название машины вида user-1
- "sudo hostnamectl set-hostname user-1"

Установим время соответсвующее местному времени
- "sudo timedatectl set-timezone Europe/Moscow"

### Part 3.3
![img3.1.png](img%2Fimg3.1.png)

lo (loopback device) – виртуальный интерфейс, присутствующий по умолчанию в любом Linux. Он используется для отладки сетевых программ и запуска серверных приложений на локальной машине. С этим интерфейсом всегда связан адрес 127.0.0.1. У него есть dns-имя – localhost.

### Part 3.4
![img3.2.png](img%2Fimg3.2.png)

DHCP - Dynamic Host Configuration Protocol, сетевой протокол, позволяющий сетевым устройствам автоматически получать IP-адрес и другие параметры, необходимые для работы в сети TCP/IP. Данный протокол работает по модели «клиент-сервер».

### Part 3.5
![img3.3.png](img%2Fimg3.3.png)

Определяем внешний IP-адрес шлюза, который используется для взаимодействия с внешним сервером Google (8.8.8.8).
- "ping -c 1 8.8.8.8 | grep PING | awk '{print $3}' | tr -d '()'"

Определяем внешний ip адрес шлюза сети линукс
- "ip route | grep default | awk '{print $3}'"

- ip route - для показа и манипуляций таблиц маршрутизации
- awk '{print $3}" - команда awk, которая указывает на вывод третьего поля из строки, разделенной пробелами.

### Part 3.6
![img3.4.png](img%2Fimg3.4.png)

- "sudo nano /etc/netplan/00-installer-config.yaml"
- "sudo netplan apply"

### Part 3.7
- "sudo reboot"

![img3.5.png](img%2Fimg3.5.png)

- Проверили внешний и локальный ip шлюза(значения сошлись)
- Успешно пропинговали 1.1.1.1 и ya.ru без потерь

![img3.6.png](img%2Fimg3.6.png)

## Part 4
![img4.png](img%2Fimg4.png)

## Part 5

Sudo – это утилита для операционных систем семейства Linux, позволяющая пользователю запускать программы с привилегиями другой учётной записи, как правило, суперпользователя.

![img5.png](img%2Fimg5.png)

- "su testuser" переключение на пользователя
- "sudo usermod -aG sudo testuser" добавление в группу sudo tester'a

![img5.1.png](img%2Fimg5.1.png)

## Part 6
![img6.png](img%2Fimg6.png)

- sudo apt install systemd-timesyncd

- "sudo systemctl start systemd-timesyncd"
- "sudo systemctl enable systemd-timesyncd"

Запуск службы и её автоматический запуск при каждом старте системы

![img6.1.png](img%2Fimg6.1.png)

"sudo systemctl status systemd-timesyncd"
 Убедитесь, что служба работает без ошибок.

  ## Part 7
![img7vim.png](img%2Fimg7vim.png)

- Чтобы выйти из vim сохраняя изменения, нужно нажать клавиши Esc, затем :wq и Enter.

![img7.1nano.png](img%2Fimg7.1nano.png)

- Чтобы выйти из nano сохраняя изменения, нужно нажать клавиши Ctrl+X, затем Y и Enter.

![img7.2joe.png](img%2Fimg7.2joe.png)

- Чтобы выйти из Joe сохраняя изменения, нужно нажать клавиши Ctrl+K, затем X и Enter.

![img7vim1.png](img%2Fimg7vim1.png)
- Чтобы выйти из vim не сохраняя изменения нужно нажать клавиши Esc, затем :q! и Enter.

![img7nano1.png](img%2Fimg7nano1.png)
- Чтобы выйти из nano не сохраняя изменения нужно нажать клавиши Ctrl+X, затем N и Enter.

![img7joe1.png](img%2Fimg7joe1.png)
- Чтобы выйти из Joe не сохраняя изменения нужно нажать клавиши Ctrl+K, затем Q и выбрать n и Enter.

>VIM:
>Нужно нажать клавишу / и ввести слово, которое вы хотите найти. Чтобы перейти к следующему совпадению, нужно нажать клавишу n. Чтобы перейти к предыдущему совпадению, нужно нажать клавишу N.

![vimfind.png](img%2Fvimfind.png)

>Чтобы заменить слово в VIM, нужно нажать клавиши : и ввести команду %s/old_word/new_word/g, где old_word Чтобы заменить все вхождения слова, нужно добавить флаг g в конце команды.

![vimrep.png](img%2Fvimrep.png)

>NANO:
>Чтобы в NANO найти слово, нужно нажать клавиши Ctrl+W и ввести слово и нажать  которое вы хотите найти. Чтобы перейти к следующему совпадению, нужно нажать клавишу Alt+W. Чтобы перейти к предыдущему совпадению, нужно нажать клавишу Alt+V.

![nanofind.png](img%2Fnanofind.png)

>Для замены слова в NANO нужно нажать клавиши Ctrl+\ и ввести слово, которое вы хотите заменить, а затем новое слово. Чтобы заменить все вхождения слова, нужно нажать клавишу A.

![nanorep.png](img%2Fnanorep.png)

>JOE:
>Чтобы в JOE найти слово, нужно нажать клавиши Ctrl+K F и ввести слово, которое вы хотите найти. Чтобы перейти к следующему совпадению, нужно нажать клавишу Ctrl+K. Чтобы перейти к предыдущему совпадению, нужно нажать клавишу Ctrl+Shift+K.

![joefind.png](img%2Fjoefind.png)

>Для замены слова в JOE нужно нажать клавиши Ctrl+K, F, R, и ввести слово, которое вы хотите заменить, а затем новое слово. Чтобы заменить все вхождения слова, нужно нажать клавишу Ctrl+K и ввести слово, которое вы хотите заменить, а затем новое слово и нажать клавишу Alt+Shift+K.

![joerep.png](img%2Fjoerep.png)

## Part 8

![sshenable.png](img%2Fsshenable.png)
- sudo systemctl enable ssh - запуск системы ssh
- sudo nano /etc/ssh/sshd_config - Port 2022
- sudo systemctl restart sshd

![pssshd.png](img%2Fpssshd.png)
- Отображение процесса
<b>ps</b> - выводит сведения о процессах в статическом виде
<b>-е</b> - выбор всех процессов
<b>| grep sshd</b> - поиск через pipe как вывод грепа для ввода ps

- ``sudo reboot``
- netstat -tan
![netstat.png](img%2Fnetstat.png)
<b>-tan:</b>
- t - отабражает TCP подключения
- a - Показать состояние всех сокетов; обычно сокеты, используемые серверными процессами не показываются
- n - Показать сетевые адреса как числа. netstat обычно показывает адреса как символы

| Атрибут       | Описание                |
| ------------- |------------------:|
| Proto     | Содержит тип протокола    |
| Recv-Q     | Счетчик байтов не скопированных программой пользователя их этого сокета |
| Send-Q  | Счетчик байтов, не подтвержденных удалленым узлом         |
| Local address  | Адрес и номер порта локального конца сокета        |
| Foreign address  | Адрес и номер порта удаленного конца сокета        |
| State  | Состояние сокета        |

LISTEN - Сокет ожидает входящих подклчений
SYN_SENT - Сокет находящийся в режиме активной попытки установки подключения
0.0.0.0 - это немаршрутизируемый адрес IPv4, который используется в качестве адреса по умолчанию или адреса-заполнителя


